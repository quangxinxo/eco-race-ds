<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ECO-RACE 4.0 - ĐƯỜNG ĐUA XANH: Hệ Thống Theo Dõi Phân Loại Rác</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"/>
<style>
body { font-family: 'Inter', sans-serif; }
.tab-btn { transition: all 0.2s; }
.leaderboard-container { max-height: 400px; overflow-y: auto; }
.day-header {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    transform: rotate(180deg);
    padding: 8px 4px;
    width: 30px;
}
#fireworks-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 60;
}
.firework {
    position: absolute;
    width: 5px;
    height: 5px;
    background: var(--firework-color);
    border-radius: 50%;
    bottom: 0;
    opacity: 0;
    transform: translateY(0);
    animation: launch 3s ease-in-out forwards;
    box-shadow: 0 0 10px var(--firework-color), 0 0 20px var(--firework-color);
}
@keyframes launch {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    10% { opacity: 1; transform: translateY(-50vh) scale(1.2); }
    20% { opacity: 1; transform: translateY(-80vh) scale(1.5); box-shadow: 0 0 15px var(--firework-color), 0 0 30px var(--firework-color); }
    30% { opacity: 0; transform: translateY(-80vh) scale(1.5); }
    31% { opacity: 1; transform: translateY(-80vh) scale(0); width: 50px; height: 50px; box-shadow: none; }
    100% { opacity: 0; transform: translateY(-80vh) scale(3); box-shadow: 0 0 10px var(--firework-color), 0 0 20px var(--firework-color); }
}
.firework::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, #fff 10%, transparent 70%);
    animation: sparkle 0.3s infinite alternate;
}
@keyframes sparkle {
    from { transform: scale(1); opacity: 1; }
    to { transform: scale(0.5); opacity: 0.8; }
}
</style>
</head>
<body class="bg-gray-50 text-gray-800">
<div class="hidden" id="fireworks-container"></div>

<!-- Modal -->
<div id="my-modal" class="fixed inset-0 z-50 overflow-y-auto hidden" role="dialog" aria-modal="true">
<div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
<div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
<span class="hidden sm:inline-block sm:align-middle sm:h-screen">​</span>
<div class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
<div>
<div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-opacity-20" id="modal-icon"></div>
<div class="mt-3 text-center sm:mt-5">
<h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title"></h3>
<div class="mt-2">
<p class="text-sm text-gray-500" id="modal-message"></p>
</div>
</div>
</div>
<div class="mt-5 sm:mt-6">
<button type="button" class="inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:text-sm" onclick="closeModal()">Đóng</button>
</div>
</div>
</div>
</div>

<div class="container mx-auto px-4 py-8">
<header class="text-center mb-8">
    <div class="flex items-center justify-center space-x-4">
        <div class="h-20 w-20 flex items-center justify-center">
            <img 
                src="your_school_logo.png" 
                alt="Logo Trường Của Bạn" 
                class="w-full h-full object-contain" 
                onerror="this.style.display='none'"
            />
        </div>
        <div>
            <h1 class="text-4xl sm:text-5xl font-extrabold text-green-700 mt-4 tracking-tight uppercase leading-none">ECO-RACE 4.0</h1>
            <p class="text-3xl sm:text-4xl font-extrabold text-green-700 mt-1 tracking-tight uppercase leading-none">ĐƯỜNG ĐUA XANH</p>
            <p class="text-lg text-gray-500 mt-2 font-medium">HỆ THỐNG THEO DÕI PHÂN LOẠI RÁC</p>
        </div>
    </div>
    
    <div class="flex justify-center items-center mt-4">
        <p class="text-sm text-blue-500 font-medium" id="app-status">Hệ thống đang hoạt động 🎉</p>
    </div>
</header>

<!-- Navigation Tabs -->
<div class="flex justify-center mb-8 space-x-4 flex-wrap">
<button class="tab-btn bg-green-700 text-white px-5 py-2 rounded-full shadow-lg font-semibold text-sm transition-transform hover:scale-105 my-1" onclick="switchView('input-view')">♻️ 1. Nhập Liệu Rác</button>
<button class="tab-btn bg-gray-200 text-gray-700 px-5 py-2 rounded-full shadow-lg font-semibold text-sm transition-transform hover:scale-105 my-1" onclick="switchView('dashboard-view')">📊 2. Bảng Xếp Hạng</button>
<button class="tab-btn bg-gray-200 text-gray-700 px-5 py-2 rounded-full shadow-lg font-semibold text-sm transition-transform hover:scale-105 my-1" onclick="switchView('media-view')">📸 3. Kỷ Niệm Xanh</button>
</div>

<!-- View: Input Form -->
<div class="app-view" id="input-view">
<div class="bg-white p-6 rounded-xl shadow-2xl max-w-lg mx-auto border-t-4 border-green-500">
<h2 class="text-2xl font-bold text-green-700 mb-4 text-center flex items-center justify-center space-x-2">
<span class="text-3xl">🗑️</span>
<span>Ghi Nhận Tái Chế</span>
</h2>
<p class="text-sm text-green-500 mb-2 text-center font-bold">Hệ thống tính điểm: 1ml thể tích hoặc 1 gram trọng lượng = 1 điểm</p>
<p class="text-sm text-gray-500 mb-6 text-center">🌟 Vui lòng nhập chi tiết rác đã phân loại vào giờ.</p>
<form class="space-y-4" id="input-form">
<div class="grid grid-cols-2 gap-4">
<label class="block">
<span class="text-gray-700 font-medium flex items-center"><span class="text-xl mr-1">🏫</span> Chọn Lớp</span>
<select class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-500 focus:ring-opacity-50 p-2" id="class-select">
    <option value="">-- Chọn lớp --</option>
    <option>10A1</option>
    <option>10A2</option>
    <option>10A3</option>
    <option>10A4</option>
    <option>10A5</option>
    <option>10A6</option>
    <option>11A1</option>
    <option>11A2</option>
    <option>11A3</option>
    <option>11A4</option>
    <option>11A5</option>
    <option>11A6</option>
    <option>12A1</option>
    <option>12A2</option>
    <option>12A3</option>
    <option>12A4</option>
    <option>12A5</option>
    <option>12A6</option>
</select>
</label>
<label class="block">
<span class="text-gray-700 font-medium flex items-center"><span class="text-xl mr-1">🗓️</span> Chọn Ngày Ghi Nhận</span>
<input type="date" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-500 focus:ring-opacity-50 p-2" id="log-date"/>
</label>
</div>

<h3 class="text-lg font-bold text-green-600 pt-4 border-t border-dashed border-gray-200 mt-4 flex items-center"><span class="text-2xl mr-2">🥤</span> 1. Chai Nhựa (Điểm từ Thể Tích)</h3>
<div class="grid grid-cols-2 gap-4">
<label class="block">
<span class="text-gray-700">Số lượng chai</span>
<input type="number" min="0" value="0" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-500 focus:ring-opacity-50 p-2" id="bottles-count"/>
</label>
<label class="block">
<span class="text-gray-700">Thể tích TB (ml)</span>
<input type="number" min="1" value="500" placeholder="VD: 500 (ml)" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-500 focus:ring-opacity-50 p-2" id="bottle-volume"/>
</label>
</div>

<h3 class="text-lg font-bold text-green-600 pt-4 border-t border-dashed border-gray-200 mt-4 flex items-center"><span class="text-2xl mr-2">🥫</span> 2. Lon Kim Loại (Điểm từ Thể Tích)</h3>
<div class="grid grid-cols-2 gap-4">
<label class="block">
<span class="text-gray-700">Số lượng lon</span>
<input type="number" min="0" value="0" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-500 focus:ring-opacity-50 p-2" id="cans-count"/>
</label>
<label class="block">
<span class="text-gray-700">Thể tích TB (ml)</span>
<input type="number" min="1" value="330" placeholder="VD: 330 (ml)" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-500 focus:ring-opacity-50 p-2" id="can-volume"/>
</label>
</div>

<h3 class="text-lg font-bold text-green-600 pt-4 border-t border-dashed border-gray-200 mt-4 flex items-center"><span class="text-2xl mr-2">📄</span> 3. Giấy Các Loại (Điểm từ Trọng Lượng)</h3>
<label class="block">
<span class="text-gray-700">Cân nặng (grams)</span>
<input type="number" min="0" value="0" placeholder="VD: 500 (gram)" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-500 focus:ring-opacity-50 p-2" id="paper-weight"/>
</label>

<h3 class="text-lg font-bold text-green-600 pt-4 border-t border-dashed border-gray-200 mt-4 flex items-center"><span class="text-2xl mr-2">📸</span> 4. Kỷ Niệm (Tải lên/Link)</h3>
<label class="block mb-4">
    <span class="text-gray-700">Gửi Link Ảnh/Video (Google Drive/Khác)</span>
    <input type="url" placeholder="Dán link ảnh hoặc video tại đây..." class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 p-2" id="media-link"/>
</label>

<label class="block">
    <span class="text-gray-700">Tải lên Ảnh/Video (Tùy chọn)</span>
    <input type="file" accept="image/*,video/*" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-2" id="media-file"/>
</label>

<div class="bg-blue-50 border-l-4 border-blue-400 p-3 rounded-lg mt-4">
<p class="text-sm text-blue-800 font-semibold">ℹ️ Lưu ý về Tải ảnh:</p>
<p class="text-xs text-blue-700">Nếu bạn dùng link Drive, hãy đảm bảo link có thể truy cập công khai.</p>
</div>

<button type="button" class="w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 transition-colors mt-6 text-lg transform hover:scale-[1.02] active:scale-100" onclick="logRecycling()">🎉 GỬI DỮ LIỆU & XÁC NHẬN 🎉</button>
</form>
</div>
</div>

<!-- View: Dashboard -->
<div class="app-view hidden" id="dashboard-view">
<div class="bg-white p-6 rounded-xl shadow-2xl border-t-4 border-green-500">
<h2 class="text-3xl font-extrabold text-green-700 mb-2 text-center flex items-center justify-center space-x-2">
<span class="text-3xl">🏆</span>
<span>BẢNG XÉP HẠNG TUẦN</span>
</h2>
<p class="text-md font-medium text-gray-500 mb-6 text-center" id="current-week-range">Tuần 1-7 tháng 10, 2025</p>

<div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded-lg shadow-md">
<h3 class="text-xl font-bold text-yellow-700 flex items-center space-x-2"><span class="text-2xl">🌟</span> MVP TUẦN TRƯỚC</h3>
<div class="text-lg mt-1 text-gray-700 flex items-center space-x-2" id="mvp-last-week">
<span class="text-2xl">🥇</span><span class="font-bold">10A1</span> - 15,420 điểm
</div>
</div>

<div class="overflow-x-auto leaderboard-container">
<table class="min-w-full divide-y divide-gray-200">
<thead class="bg-green-100 sticky top-0 z-10">
<tr>
<th scope="col" class="px-6 py-3 text-center text-xs font-bold text-green-700 uppercase tracking-wider w-1/12">Hạng</th>
<th scope="col" class="px-6 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider w-4/12">Lớp</th>
<th scope="col" class="px-6 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider w-4/12">Tổng Điểm Tuần</th>
<th scope="col" class="px-6 py-3 text-center text-xs font-bold text-green-700 uppercase tracking-wider w-3/12">% Tăng Trưởng</th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200" id="leaderboard-table-body">
</tbody>
</table>
</div>
</div>

<div class="bg-white p-6 rounded-xl shadow-2xl mt-8 overflow-x-auto border-t-4 border-green-500">
<h3 class="text-2xl font-bold text-green-700 mb-4 text-center">THỐNG KÊ CHI TIẾT TUẦN</h3>
<p class="text-sm text-gray-500 mb-4 text-center">Tổng điểm và chi tiết các loại rác theo ngày.</p>
<div class="overflow-x-auto">
<table class="min-w-full divide-y divide-gray-200">
<thead class="bg-green-100">
<tr>
<th scope="col" class="px-2 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider">Lớp</th>
<th scope="col" class="px-2 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider">Tổng ĐIỂM</th>
<th scope="col" class="px-2 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider">Chai (Lít)</th>
<th scope="col" class="px-2 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider">Lon (Lít)</th>
<th scope="col" class="px-2 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider">Giấy (Gram)</th>
<th scope="col" class="px-2 py-3 text-center text-xs font-bold text-green-700 uppercase tracking-wider day-header">T2</th>
<th scope="col" class="px-2 py-3 text-center text-xs font-bold text-green-700 uppercase tracking-wider day-header">T3</th>
<th scope="col" class="px-2 py-3 text-center text-xs font-bold text-green-700 uppercase tracking-wider day-header">T4</th>
<th scope="col" class="px-2 py-3 text-center text-xs font-bold text-green-700 uppercase tracking-wider day-header">T5</th>
<th scope="col" class="px-2 py-3 text-center text-xs font-bold text-green-700 uppercase tracking-wider day-header">T6</th>
<th scope="col" class="px-2 py-3 text-center text-xs font-bold text-green-700 uppercase tracking-wider day-header">T7</th>
<th scope="col" class="px-2 py-3 text-center text-xs font-bold text-green-700 uppercase tracking-wider day-header">CN</th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200" id="detail-stats-table-body">
</tbody>
</table>
</div>
</div>
</div>

<!-- View: Media Gallery -->
<div class="app-view hidden" id="media-view">
<div class="bg-white p-6 rounded-xl shadow-2xl border-t-4 border-green-500">
<h2 class="text-3xl font-extrabold text-green-700 mb-6 text-center flex items-center justify-center space-x-2">
<span class="text-3xl">📸</span>
<span>KỶ NIỆM XANH</span>
</h2>
<p class="text-lg text-gray-500 mb-6 text-center">Các hoạt động tái chế được ghi nhận bằng ảnh và video từ các lớp.</p>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="media-gallery">
</div>
</div>
</div>

<footer class="mt-12 text-center text-gray-400 text-sm">
<p>Dự án Trường học Sinh thái ASEAN - Cung cấp bởi ECO-RACE 4.0 System</p>
</footer>
</div>

<script src="app.js"></script>

</body>
</html>